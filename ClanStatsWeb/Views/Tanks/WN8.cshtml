@using Negri.Wot
@using Negri.Wot.Properties
@using Negri.Wot.Tanks
@model Negri.Wot.Models.TanksWn8
@{
    ViewBag.Title = Resources.WN8Title;
}

@section extraHeaders {
    <link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css " rel="stylesheet" type="text/css" />
    <meta name="description" content="WN8 Expected Values for WoT Console">
    <style>
        #moeTable_filter {
            text-align: left;
        }

        #moeTable_paginate {
            text-align: left;
        }
    </style>
}

@section lead {
    <section class="jumbotron top-banner">
        <h1>@Resources.WN8Title</h1>
        <h2>@Resources.WN8SubTitle</h2>
        <p>
            @string.Format(Resources.WN8DataInfo, Model.Tanks.Length, Model.Source, Model.Version, Model.Date)
        </p>
    </section>
}

<section id="moe" class="row">
    <div class="col-md-12">

        <div id="filters" class="panel panel-default">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-2">
                        <input type="text" id="searchBox" class="form-control" placeholder="@Resources.SearchByTank">
                    </div>
                    <div class="col-md-4" id="nationButtons">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Usa"><img src="~/Images/Nations/1.png" height="18" alt="@Resources.Usa" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Germany"><img src="~/Images/Nations/7.png" height="18" alt="@Resources.Germany" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Ussr"><img src="~/Images/Nations/3.png" height="18" alt="@Resources.Ussr" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Uk"><img src="~/Images/Nations/5.png" height="18" alt="@Resources.Uk" /></button>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="France"><img src="~/Images/Nations/2.png" height="18" alt="@Resources.France" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Japan"><img src="~/Images/Nations/6.png" height="18" alt="@Resources.Japan" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="China"><img src="~/Images/Nations/4.png" height="18" alt="@Resources.China" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Czechoslovakia"><img src="~/Images/Nations/8.png" height="18" alt="@Resources.Czechoslovakia" /></button>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Sweden"><img src="~/Images/Nations/9.png" height="18" alt="@Resources.Sweden" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Poland"><img src="~/Images/Nations/10.png" height="18" alt="@Resources.Poland" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Italy"><img src="~/Images/Nations/12.png" height="18" alt="@Resources.Italy" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Mercenaries"><img src="~/Images/Nations/11.png" height="18" alt="@Resources.Mercenaries" /></button>
                        </div>
                    </div>
                    <div class="col-md-2" id="typesButtons">

                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Light"><img src="~/Images/Types/4.svg" width="18" height="18" alt="@Resources.Light" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Medium"><img src="~/Images/Types/3.svg" width="18" height="18" alt="@Resources.Medium" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Heavy"><img src="~/Images/Types/1.svg" width="18" height="18" alt="@Resources.Heavy" /></button>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="TankDestroyer"><img src="~/Images/Types/2.svg" width="18" height="18" alt="@Resources.TankDestroyer" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Artillery"><img src="~/Images/Types/5.svg" width="18" height="18" alt="@Resources.Artillery" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Premium"><img src="~/Images/Types/premium.svg" width="18" height="18" alt="@Resources.Premium" /></button>
                        </div>

                    </div>
                    <div class="col-md-3" id="tiersButtons">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-tier" data-tier="01" aria-label="1"><div style="width: 1.2em;">I</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="02" aria-label="2"><div style="width: 1.2em;">II</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="03" aria-label="3"><div style="width: 1.2em;">III</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="04" aria-label="4"><div style="width: 1.2em;">IV</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="05" aria-label="5"><div style="width: 1.2em;">V</div></button>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-tier" data-tier="06" aria-label="6"><div style="width: 1.2em;">VI</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="07" aria-label="7"><div style="width: 1.2em;">VII</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="08" aria-label="8"><div style="width: 1.2em;">VIII</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="09" aria-label="9"><div style="width: 1.2em;">IX</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="10" aria-label="10"><div style="width: 1.2em;">X</div></button>
                        </div>
                    </div>
                    <div class="col-md-1">
                        <button type="button" class="btn btn-warning" aria-label="Reset" id="resetFilters">
                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <table class="data table-striped" id="moeTable">
            <thead>
                <tr>
                    <th rowspan="2">
                        <img alt="@Resources.Nation" title="@Resources.Nation" height="18" src="~/Images/Nations/Globe_icon.svg" />
                    </th>
                    <th rowspan="2">
                        <img alt="@Resources.Type" title="@Resources.Type" height="18" src="~/Images/Types/types.png" />
                    </th>
                    <th rowspan="2">
                        <span title="@Resources.Tier">I-X</span>
                    </th>
                    <th rowspan="2">@Resources.Tank</th>
                    <th colspan="5">@Resources.ExpectedValues</th>
                    <th rowspan="2">@Resources.Origin</th>
                </tr>
                <tr>
                    @*<th></th>*@
                    @*<th></th>*@
                    @*<th></th>*@
                    @*<th></th>*@
                    <th>@Resources.Damage</th>
                    <th>@Resources.WinRate</th>
                    <th>@Resources.Kills</th>
                    <th>@Resources.Spoted</th>
                    <th>@Resources.Defense</th>
                </tr>
            </thead>
            <tfoot></tfoot>
            <tbody>
                @{
                    foreach (var t in Model.Tanks)
                    {
                        <tr id="tank-id-@t.TankId.ToString()">
                            <td class="text-center" data-sort="@t.Nation" data-filter="@t.Nation">
                                <img height="18" title="@Resources.ResourceManager.GetString(t.Nation.ToString())" alt="@Resources.ResourceManager.GetString(t.Nation.ToString())" src="~/Images/Nations/@((int) t.Nation).png" />
                            </td>
                            <td class="text-center" data-sort="@t.Type" data-filter="@t.Type@(t.IsPremium ? " Premium" : " Regular")">
                                <img height="18" title="@Resources.ResourceManager.GetString(t.Type.ToString())" alt="@Resources.ResourceManager.GetString(t.Type.ToString())" src="~/Images/Types/@((int) t.Type).svg" />
                            </td>
                            <td class="text-center" data-sort="@t.Tier" data-filter="@t.Tier.ToString("00"))">@t.Tier.ToRomanNumeral()</td>
                            <td style="white-space: nowrap;" data-sort="@t.Name.RemoveDiacritics().ToLowerInvariant()" data-filter="@t.Name.RemoveDiacritics().ToLowerInvariant() @t.FullName.RemoveDiacritics().ToLowerInvariant()">
                                <a href="~/Tanks/@t.TankId"><span class="@t.PremiumClass" title="@t.FullName">@t.Name</span></a>
                            </td>
                            <td class="number-integer">@t.Damage.ToString("N0")</td>
                            <td class="number">@t.WinRate.ToString("P1")</td>
                            <td class="number">@t.Frag.ToString("N1")</td>
                            <td class="number">@t.Spot.ToString("N1")</td>
                            <td class="number">@(t.Def.ToString("N1"))</td>
                            <td>@Resources.ResourceManager.GetString("Origin" + t.Origin)</td>
                        </tr>
                    }
                }

            </tbody>
        </table>
    </div>
</section>


<section id="wn8Warnings" class="row" style="padding-top: 1em;">
    <div class="col-md-2"></div>
    <div class="col-md-8 alert alert-info">
        <h3 class="text-center" style="margin-top: 5px; margin-bottom: 5px;">@Resources.Information</h3>
        <ol>
            @if (GlobalHelper.Language == "pt")
            {
                <li>Estes são os valores esperados para se calcular o WN8.</li>
                <li>Se você, dentro todas suas batalhas, mantiver <b>os seus</b> valores médios por batalha iguais aos desta tabela, em cada tanque que jogue, seu WN8 será de 1.565.</li>
                <li>Esses valores foram computados por <a href="https://wotcstat.info/howtown8">WotCStat</a>, para tanques de console, que gentilmente me permitiram usar seus valores. <a href="https://wotcstat.info/">Veja o site deles</a>, tem montes de informações detalhadas sobre jogadores, tanques e clãs.</li>
                <li>Aqui <b>Dano</b> é apenas <b>Dano Direto</b>. Este é o principal fator (~60%) no cálculo do WN8. Tente maximizar isso (o dano direto) para aumentar o seu WN8.</li>
                <li>Você pode obter esses valores usando uma <a rel="nofollow" href="~/api/tanks/wn8">API</a>, ou fazendo o download de uma <a rel="nofollow" href="~/Tanks/WN8/Excel">Planilha Excel</a>, e então fazer seus próprios cálculos de WN8.</li>
            }
            else if (GlobalHelper.Language == "es")
            {
                <li>Estos son los valores esperados que se deben utilizar en la computación de WN8</li>
                <li>Si tú, entre todas tus batallas, sigue sosteniéis <b>tus</b> valores medios por batalla iguales a los de esta mesa, por cada tanque que juegues, tu WN8 será de 1.565.</li>
                <li>Estos valores son calculados por <a href="https://wotcstat.info/howtown8"> WotCStat </a>, para tanques de consola, que amablemente me permitió usar sus valores. <a href="https://wotcstat.info/">Visite su sitio </a>, tiene una gran cantidad de información detallada sobre jugadores, tanques y clanes.</li>
                <li>Aquí <b>Daño</b> es sólo <b>Daño Directo</b>. Este es el principal (60%) factor en el cálculo WN8. Trate de maximizar esto en orden para aumentar sus valores WN8.</li>
                <li>Puede tomar estos valores utilizando un <a rel="nofollow" href="~/api/tanks/wn8">API</a>, o descargando un <a rel="nofollow" href="~/Tanks/WN8/Excel">Excel File</a>, y hacer su propio archivo de cálculo WN8.</li>
            }
            else if (GlobalHelper.Language == "fr")
            {
                <li>Ce sont les valeurs attendues qui devraient être utilisées sur le calcul du WN8.</li>
                <li>Si vous, parmi toutes vos batailles, gardez <b>vos</b> valeurs moyennes par bataille les mêmes que celles de cette table, pour chaque char que vous jouez, votre WN8 sera de 1 565.</li>
                <li>Ces valeurs sont calculées par <a href="https://wotcstat.info/howtown8">WotCStat</a>, pour les chars de console, ce qui m'a gentiment permis d'utiliser leurs valeurs. <a href="https://wotcstat.info/">Consultez leur site</a>, il contient de nombreuses informations détaillées sur les joueurs, les tanks et les clans.</li>
                <li>Ici, <b>Damage</b> n'est <b>Dommages Directs</b>. Il s'agit de la principale (60%) facteur sur le calcul WN8. Essayez de maximiser cela sur l'ordre d'augmenter vos valeurs WN8.</li>
                <li>Vous pouvez saisir ces valeurs à l'aide d'une <a rel="nofollow" href="~/api/tanks/wn8">API</a>, ou télécharger un <a rel="nofollow" href="~/Tanks/WN8/Excel">fichier Excel</a>, et faire votre propre calcul WN8.</li>
            }
            else if (GlobalHelper.Language == "de")
            {
                <li>Dies sind die erwarteten Werte, die für die Berechnung der WN8 verwendet werden sollten.</li>
                <li>Wenn du unter all deinen Kämpfen <b>your</b> Durchschnittswerte pro Gefecht die gleichen werte wie die auf diesem Tisch haltest, wird dein WN8 für jeden Panzer, den du spielst, 1.565 sein.</li>
                <li>Die Hauptquelle ist <a href="https://modxvm.com/en/wn8-expected-values/">XVM</a>, das diese Werte täglich aus der PC-Community kompiliert. Diese Werte führen zu einem WN8, das sehr nahe an dem liegt, was Sie auf <a href="http://wotinfo.net/">WoTInfo</a> und <a href="https://wotcstat.info/">WotCStat</a> sehen.</li>
                <li>Diese Werte werden von <a href="https://wotcstat.info/howtown8">WotCStat</a> für Konsolenpanzer berechnet, die mir freundlicherweise erlaubt haben, ihre Werte zu verwenden. <a href="https://wotcstat.info/">Überprüfe ihre Website</a>, sie enthält viele detaillierte Informationen über Spieler, Panzer und Clans.</li>
                <li>Sie können diese Werte mithilfe einer <a rel="nofollow" href="~/api/tanks/wn8">API</a> oder zum Herunterladen einer <a rel="nofollow" href="~/Tanks/WN8/Excel">Excel-Datei</a> abrufen und Ihre eigene WN8-Berechnung erstellen.</li>
            }
            else if (GlobalHelper.Language == "pl")
            {
                <li>Są to oczekiwane wartości, które powinny być używane przy obliczaniu WN8.</li>
                <li>Jeśli ty, wśród wszystkich bitew, trzymasz <b>twoje</b> średnie wartości na bitwę takie same jak te na tym stole, dla każdego czołgu, w którym grasz, Twój WN8 będzie wynosił 1565.</li>
                <li>Wartości te są obliczane przez <a href="https://wotcstat.info/howtown8">WotCStat</a> dla czołgów konsolowych, co uprzejmie pozwoliło mi użyć ich wartości. <a href="https://wotcstat.info/">Sprawdź ich stronę</a>, zawiera wiele szczegółowych informacji o graczach, czołgach i klanach.</li>
                <li>Tutaj <b>Damage</b> jest tylko <b>Bezpośrednie uszkodzenie</b>. Jest to główny (~60%) współczynnik akcjonacji WN8. Spróbuj zmaksymalizować to, aby zwiększyć swoje wartości WN8.</li>
                <li>Można pobrać te wartości za pomocą <a rel="nofollow" href="~/api/tanks/wn8">API</a> lub pobrać plik <a rel="nofollow" href="~/Tanks/WN8/Excel">Excel</a> i wykonać własne obliczenia WN8.</li>
            }
            else if (GlobalHelper.Language == "ru")
            {
                <li>Это ожидаемые значения, которые следует использовать при вычислениях WN8.</li>
                <li>Если вы, среди всех ваших сражений, держать <b>ваш</b> средние значения в бою так же, как те, на этом столе, для каждого танка, который вы играете, ваш WN8 будет 1565.</li>
                <li>Эти значения вычисляются <a href="https://wotcstat.info/howtown8"> WotCStat </a> для консольных резервуаров, что любезно разрешило мне использовать их значения. <a href="https://wotcstat.info/"> Посетите их сайт </a>, на нем много подробной информации об игроках, танках и кланах.</li>
                <li>Здесь <b>Damage</b> только <b>Прямое повреждение</b>. Это основной (60%) фактор на вычислениях WN8. Попробуйте максимизировать это на том, чтобы увеличить значения WN8.</li>
                <li>Вы можете захватить эти значения с помощью <a rel="nofollow" href="~/api/tanks/wn8">API</a> или скачать файл <a rel="nofollow" href="~/Tanks/WN8/Excel">Excel</a>, и сделать свой собственный вычисления WN8.</li>
            }
            else
            {
                <li>These are the expected values that should be used on computing the WN8.</li>
                <li>If you, among all your battles, keep <b>your</b> average values per battle the same as the ones on this table, for each tank that you play, your WN8 will be 1,565.</li>
                <li>These values are computed by <a href="https://wotcstat.info/howtown8">WotCStat</a>, for console tanks, that kindly allowed me to use their values. <a href="https://wotcstat.info/">Check their site</a>, it has a great deal of detailed information about players, tanks and clans.</li>
                <li>Here <b>Damage</b> is only Direct Damage. This is the main (~60%) factor on the WN8 computation. Try to maximize this on order to increase your WN8 values.</li>
                <li>You can grab these values using an <a rel="nofollow" href="~/api/tanks/wn8">API</a>, or downloading an <a rel="nofollow" href="~/Tanks/WN8/Excel">Excel File</a>, and do your own WN8 computation.</li>
            }
        </ol>
    </div>
    <div class="col-md-2"></div>
</section>


@section scripts {
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js  "></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            var decimalSeparator = $("body").data("requestDecimalSeparator");
            var groupingSeparator = $("body").data("requestGroupingSeparator");

            // Função de ordenção numerica do lado do cliente
            jQuery.extend(jQuery.fn.dataTableExt.oSort, {
                "numeric-flex-pre": function (a) {
                    if (a === "") {
                        return 0.0;
                    }
                    if (a === "-") {
                        return 0.0;
                    }

                    if (a.substring(0, 7) === "<a href") {
                        a = a.match(/<a [^>]+>([^<]+)<\/a>/)[1];
                    }

                    a = a.replace(groupingSeparator, "");
                    a = a.replace(groupingSeparator, "");
                    a = a.replace(groupingSeparator, "");

                    a = a.replace("%", "");
                    a = a.replace(decimalSeparator, ".");

                    return parseFloat(a);
                },

                "numeric-flex-asc": function (a, b) {
                    return ((a < b) ? -1 : ((a > b) ? 1 : 0));
                },

                "numeric-flex-desc": function (a, b) {
                    return ((a < b) ? 1 : ((a > b) ? -1 : 0));
                }
            });

            var oTable = $("#moeTable").DataTable({
                paging: true,
                lengthChange: false,
                pageLength: 25,
                pagingType: "numbers",
                info: false,
                searching: true,
                columnDefs: [
                    { type: "numeric-flex", targets: [4, 5, 6, 7, 8] },
                    { orderable: false, targets: [] },
                    { searchable: false, targets: [4, 5, 6, 7, 8] }
                ],
                order: [[2, "desc"]],
                dom: "tp",
                language: {
                    paginate: {
                        previous: "@Resources.Previous",
                        next: "@Resources.Next"
                    },
                    search: "@Resources.MoEFilter"
                }
            });

            // reset
            $("#resetFilters").click(function () {
                $("#searchBox").val("");
                $("#nationButtons .btn-nation").removeClass("filter-button-selected");
                $("#typesButtons .btn-type").removeClass("filter-button-selected");
                $("#tiersButtons .btn-tier").removeClass("filter-button-selected");

                oTable.columns(0).search("");
                oTable.columns(1).search("");
                oTable.columns(2).search("");
                oTable.search("").draw();
            });

            // Caixa de Buscas
            $("#searchBox").keyup(function () {
                oTable.search($(this).val()).draw();
            });

            // Por nação
            $(".btn-nation").click(function () {
                var btn = $(this);
                var nation = btn.data("nation");
                oTable.columns(0).search(nation).draw();
                $("#nationButtons .btn-nation").removeClass("filter-button-selected");
                btn.addClass("filter-button-selected");
            });

            // Por tipo
            $(".btn-type").click(function () {
                var btn = $(this);
                var type = btn.data("type");
                oTable.columns(1).search(type).draw();
                $("#typesButtons .btn-type").removeClass("filter-button-selected");
                btn.addClass("filter-button-selected");
            });

            // Por Tier
            $(".btn-tier").click(function () {
                var btn = $(this);
                var type = btn.data("tier");
                oTable.columns(2).search(type).draw();
                $("#tiersButtons .btn-tier").removeClass("filter-button-selected");
                btn.addClass("filter-button-selected");
            });


        });

    </script>


}