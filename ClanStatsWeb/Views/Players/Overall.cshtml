@using Negri.Wot
@using Negri.Wot.Properties
@using Negri.Wot.Tanks
@model Negri.Wot.Models.PlayerPage

@{
    ViewBag.Title = $"{Model.Player.Name} [{Model.Clan.ClanTag}] - {Resources.Overall}";
}

@section extraHeaders {
    <meta name="description" content="@string.Format(Resources.OverallStatsForPlayer, Model.Player.Name, Model.Clan.ClanTag)">
    <link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css " rel="stylesheet" type="text/css" />
    <style>
        .top-banner {
            background: linear-gradient(to bottom right, @Math.Max(Model.Player.TotalWn8, (double)Wn8Rating.Average).ToWebColor(0.80, -0.50), @Math.Max(Model.Player.TotalWn8, (double)Wn8Rating.Average).ToWebColor(0.45, -0.98), rgba(10, 10, 10, 0.80)), url(@Model.BestOverallTankImageUrl);
            background-position: right center;
            background-size: auto 100%;
            background-repeat: no-repeat;
        }

        #acesTable_paginate {
            text-align: left;
        }

        #leaderIfPlayABattle_paginate {
            text-align: left;
        }

        #leaderIfFewMoreGames_paginate {
            text-align: left;
        }

        #leaderIfFewMoreDamage_paginate {
            text-align: left;
        }

        #leaderOnNextUpdate_paginate {
            text-align: left;
        }

        #overallTanks_paginate {
            text-align: left;
        }

    </style>
}


@section lead {
    <section class="jumbotron top-banner">
        <h1><a href="@Model.ExternalUrl">@Model.Player.Name</a></h1>
        <h2><a href="~/Clan/@Model.Clan.ClanTag">@Model.Clan.ClanTag</a></h2>
        @Html.Raw(string.Format(Resources.OverallStatsForPlayerMoment, Model.Player.Moment))
    </section>
}

<section class="row" id="main">
    <div class="col-md-2"></div>
    <div class="col-md-8">
        <h2>@Resources.Summary</h2>
        <table class="data table-striped" id="resume-table">
            <thead>
                <tr>
                    <th rowspan="2">@Resources.Tier</th>
                    <th colspan="4" style="border-right: darkgrey 1px solid" class="sort-key">@Resources.Overall</th>
                    @*<th></th>*@
                    @*<th></th>*@
                    @*<th></th>*@
                    <th colspan="5"><a href="~/Clan/@Model.Clan.ClanTag/Commanders/@Model.Player.Id/Recent">@Resources.Recent</a></th>
                    @*<th></th>*@
                    @*<th></th>*@
                    @*<th></th>*@
                    @*<th></th>*@
                </tr>
                <tr>
                    @*<th></th>*@
                    <th class="text-nowrap">@Resources.Battles</th>
                    <th class="text-nowrap">@Resources.WinRate</th>
                    <th class="text-nowrap">@Resources.AvgTier</th>
                    <th style="border-right: darkgrey 1px solid">@Resources.WN8</th>
                    <th>@Resources.Battles</th>
                    <th>@Resources.Hours</th>
                    <th class="text-nowrap">@Resources.WinRate</th>
                    <th class="text-nowrap">@Resources.AvgTier</th>
                    <th>@Resources.WN8</th>
                </tr>
            </thead>
            <tfoot>
            </tfoot>
            <tbody>
                @Helpers.PlayerPerformanceRow(Model.Player)
                @Helpers.PlayerPerformanceRow(Model.Player, 10)
                @Helpers.PlayerPerformanceRow(Model.Player, 9, 9)
                @Helpers.PlayerPerformanceRow(Model.Player, 8, 8)
                @Helpers.PlayerPerformanceRow(Model.Player, 8)
                @Helpers.PlayerPerformanceRow(Model.Player, 8, 8, true)
                @Helpers.PlayerPerformanceRow(Model.Player, 5, 7)
                @Helpers.PlayerPerformanceRow(Model.Player, 1, 4)
            </tbody>

        </table>
    </div>
    <div class="col-md-2"></div>
</section>

<div class="row">
    <div class="col-md-12">
        <h2>Links</h2>
    </div>
</div>
<section class="row" id="links">
    <div class="col-sm-3">
        <ul>
            <li>
                Wargaming
                <ul>
                    <li><a @GlobalHelper.ExternalTarget href="https://console.worldoftanks.com/stats/players/@Model.Player.Id/">@Resources.Commander</a></li>
                    <li><a @GlobalHelper.ExternalTarget href="https://console.worldoftanks.com/clans/@GlobalHelper.PlataformTag/@Model.Clan.ClanTag/">@Resources.Clan</a></li>
                    <li><a @GlobalHelper.ExternalTarget href="https://console.worldoftanks.com/news/">@Resources.News</a></li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="col-sm-3">
        <ul>
            <li>
                WoTStatConsole
                <ul>
                    <li><a @GlobalHelper.ExternalTarget href="@Model.WoTStatConsoleOverallUrl">@Resources.Overall</a></li>
                    <li><a @GlobalHelper.ExternalTarget href="@Model.WotStatConsoleRecentUrl">@Resources.Recent</a></li>
                    <li><a @GlobalHelper.ExternalTarget href="@Model.WotStatConsoleHistoryUrl">@Resources.History</a></li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="col-sm-3">
        <ul>
            <li>
                WoTInfo
                <ul>
                    <li><a @GlobalHelper.ExternalTarget href="@Model.WoTInfoOverallUrl">@Resources.Overall</a></li>
                    <li><a @GlobalHelper.ExternalTarget href="@Model.WoTInfoRecentUrl">@Resources.Recent</a></li>
                    <li><a @GlobalHelper.ExternalTarget href="@Model.WoTInfoHistoryUrl">@Resources.History</a></li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="col-sm-3">
        <ul>
            <li>
                Others
                <ul>
                    <li><a href="http://www.vbaddict.net/tankstatistics/overall">@Resources.Equipment</a></li>
                    <li><a href="https://tanks.gg/list/stats">@Resources.Comparisons</a></li>
                    <li><a href="https://www.reddit.com/r/WorldofTanksConsole/">Reddit</a></li>
                    @if (GlobalHelper.Platform == Platform.XBOX)
                    {
                        <li><a href="https://discord.gg/WcJ2BGC">Discord</a></li>
                    }
                </ul>
            </li>
        </ul>
    </div>
</section>

<section class="row" id="tanks">
    <div class="col-md-1"></div>
    <div class="col-md-10">
        <h2>@Resources.Overall</h2>

        <div id="filters" class="panel panel-default">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-2">
                        <input type="text" id="searchBox" class="form-control" placeholder="Search by Tank" />
                        <div id="battlesButtons">
                            <div class="btn-group">
                                <button type="button" class="btn btn-success btn-sm btn-battles" data-battles="001" aria-label="At Least one Battle" title="At Least one Battle">
                                    <span class="glyphicon glyphicon-signal" aria-hidden="true"></span>
                                </button>
                                <button type="button" class="btn btn-info btn-sm btn-battles" data-battles="050" aria-label="At Least 50 Battles" title="At Least 50 Battles">
                                    <span class="glyphicon glyphicon-signal" aria-hidden="true"></span>
                                </button>
                            </div>
                            <div class="btn-group">
                                <button type="button" class="btn btn-warning btn-sm btn-battles" data-battles="100" aria-label="At Least 100 Battles" title="At Least 100 Battles">
                                    <span class="glyphicon glyphicon-signal" aria-hidden="true"></span>
                                </button>
                                <button type="button" class="btn btn-danger btn-sm btn-battles" data-battles="250" aria-label="At Least 250 Battles" title="At Least 250 Battles">
                                    <span class="glyphicon glyphicon-signal" aria-hidden="true"></span>
                                </button>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-4" id="nationButtons">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Usa"><img src="~/Images/Nations/1.png" height="18" alt="USA" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Germany"><img src="~/Images/Nations/7.png" height="18" alt="Germany" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Ussr"><img src="~/Images/Nations/3.png" height="18" alt="USSR" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Uk"><img src="~/Images/Nations/5.png" height="18" alt="UK" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="France"><img src="~/Images/Nations/2.png" height="18" alt="France" /></button>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Japan"><img src="~/Images/Nations/6.png" height="18" alt="Japan" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="China"><img src="~/Images/Nations/4.png" height="18" alt="China" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Czechoslovakia"><img src="~/Images/Nations/8.png" height="18" alt="Czechoslovakia" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Sweden"><img src="~/Images/Nations/9.png" height="18" alt="Sweden" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Poland"><img src="~/Images/Nations/10.png" height="18" alt="Poland" /></button>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Italy"><img src="~/Images/Nations/12.png" height="18" alt="Italy" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-nation" data-nation="Mercenaries"><img src="~/Images/Nations/11.png" height="18" alt="Mercenaries" /></button>
                        </div>
                    </div>
                    <div class="col-md-2" id="typesButtons">

                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Light"><img src="~/Images/Types/4.svg" width="18" height="18" alt="Light" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Medium"><img src="~/Images/Types/3.svg" width="18" height="18" alt="Medium" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Heavy"><img src="~/Images/Types/1.svg" width="18" height="18" alt="Heavy" /></button>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="TankDestroyer"><img src="~/Images/Types/2.svg" width="18" height="18" alt="Tank Destroyer" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Artillery"><img src="~/Images/Types/5.svg" width="18" height="18" alt="Arty" /></button>
                            <button type="button" class="btn btn-default btn-sm btn-type" data-type="Premium"><img src="~/Images/Types/premium.svg" width="18" height="18" alt="Premium" /></button>
                        </div>

                    </div>
                    <div class="col-md-3" id="tiersButtons">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-tier" data-tier="01" aria-label="1"><div style="width: 1.2em;">I</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="02" aria-label="2"><div style="width: 1.2em;">II</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="03" aria-label="3"><div style="width: 1.2em;">III</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="04" aria-label="4"><div style="width: 1.2em;">IV</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="05" aria-label="5"><div style="width: 1.2em;">V</div></button>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-tier" data-tier="06" aria-label="6"><div style="width: 1.2em;">VI</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="07" aria-label="7"><div style="width: 1.2em;">VII</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="08" aria-label="8"><div style="width: 1.2em;">VIII</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="09" aria-label="9"><div style="width: 1.2em;">IX</div></button>
                            <button type="button" class="btn btn-default btn-tier" data-tier="10" aria-label="10"><div style="width: 1.2em;">X</div></button>
                        </div>
                    </div>
                    <div class="col-md-1">
                        <button type="button" class="btn btn-warning" aria-label="Reset" id="resetFilters">
                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <table class="data table-striped" id="overallTanks">
            <thead>
                <tr>
                    <th colspan="4">@Resources.Tank</th>
                    @*extend*@
                    @*extend*@
                    @*extend*@
                    <th rowspan="2">@Resources.DaysAgo</th>
                    <th rowspan="2">
                        <img alt="@Resources.Battles" title="@Resources.Battles" height="18" src="~/Images/battles-fought.png" />
                    </th>
                    <th colspan="3" class="sort-key">@Resources.Damage</th>
                    @*extend*@
                    @*extend*@
                    <th colspan="2">@Resources.Kills</th>
                    @*extend*@
                    <th rowspan="2">@Resources.WN8</th>
                </tr>
                <tr>
                    <th><img alt="@Resources.Nation" title="@Resources.Nation" height="18" src="~/Images/Nations/Globe_icon.svg" /></th>
                    <th><img alt="@Resources.Type" title="@Resources.Type" height="18" src="~/Images/Types/types.png" /></th>
                    <th><span style="white-space: nowrap;" title="@Resources.Tier">V-X</span></th>
                    <th>@Resources.Name</th>
                    @*extend*@
                    @*extend*@
                    @*extend*@
                    <th>@Resources.Direct</th>
                    <th>@Resources.Assisted</th>
                    <th class="sort-key">@Resources.Combined</th>
                    <th>@Resources.Avg</th>
                    <th>@Resources.Max</th>
                    @*extend*@
                </tr>
            </thead>
            <tfoot></tfoot>
            <tbody>
                @foreach (var t in Model.Player.Performance.All.Values.OrderByDescending(t => t.LastBattle))
                {
                    <tr id="tank-id-ot-@t.TankId.ToString()-@Model.Player.Id.ToString()">
                        <td class="text-center" data-sort="@t.Nation" data-filter="@t.Nation">
                            <img height="18" title="@Resources.ResourceManager.GetString(t.Nation.ToString())" alt="@Resources.ResourceManager.GetString(t.Nation.ToString())" src="~/Images/Nations/@((int) t.Nation).png" />
                        </td>
                        <td class="text-center" data-sort="@t.Type" data-filter="@t.Type@(t.IsPremium ? " Premium" : " Regular")">
                            <img height="18" title="@Resources.ResourceManager.GetString(t.Type.ToString())" alt="@Resources.ResourceManager.GetString(t.Type.ToString())" src="~/Images/Types/@((int) t.Type).svg" />
                        </td>
                        <td class="text-center" data-sort="@t.Tier" data-filter="@t.Tier">@t.Tier.ToRomanNumeral()</td>
                        <td style="white-space: nowrap;" data-sort="@t.Name.RemoveDiacritics().ToLowerInvariant()" data-filter="@t.Name.RemoveDiacritics().ToLowerInvariant() @t.FullName.RemoveDiacritics().ToLowerInvariant()">
                            @Helpers.TankLink(t)
                        </td>
                        <td class="number-integer">@t.LastBattleAge.TotalDays.ToString("N0")</td>
                        <td class="number-integer" data-filter="001@(t.Battles >= 50 ? " 050" : "")@(t.Battles >= 100 ? " 100" : "")@(t.Battles >= 250 ? " 250" : "")">@t.Battles.ToString("N0")</td>
                        <td class="number-integer">@t.DirectDamagePerBattle.ToString("N0")</td>
                        <td class="number-integer">@t.DamageAssistedPerBattle.ToString("N0")</td>
                        <td class="number-integer">@t.TotalDamagePerBattle.ToString("N0")</td>
                        <td class="number">@t.KillsPerBattle.ToString("N2")</td>
                        <td class="number-integer">@t.MaxFrags.ToString("N0")</td>
                        @Helpers.WN8Td(t.Wn8)
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="col-md-1"></div>
</section>

@if (Model.CanBeOnLeaderboard)
{
    <section class="row" id="leaderboard">
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <h2><a href="~/Leaderboard/All">@Resources.Leaderboard</a></h2>
            @if (Model.OnLeaderboard.Length > 0)
            {
                <table class="data table-striped" id="acesTable">
                    <thead>
                        <tr>
                            <th colspan="4">@Resources.Tank</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th rowspan="2">@Resources.Rank</th>
                            <th rowspan="2">
                                <img alt="@Resources.Battles" title="@Resources.Battles" height="18" src="~/Images/battles-fought.png" />
                            </th>
                            <th colspan="3" class="sort-key">@Resources.Damage</th>
                            @*extend*@
                            @*extend*@
                            <th colspan="2">@Resources.Kills</th>
                            @*extend*@
                        </tr>
                        <tr>
                            <th><img alt="@Resources.Nation" title="@Resources.Nation" height="18" src="~/Images/Nations/Globe_icon.svg" /></th>
                            <th><img alt="@Resources.Type" title="@Resources.Type" height="18" src="~/Images/Types/types.png" /></th>
                            <th><span style="white-space: nowrap;" title="@Resources.Tier">V-X</span></th>
                            <th>@Resources.Name</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th>@Resources.Direct</th>
                            <th>@Resources.Assisted</th>
                            <th class="sort-key">@Resources.Combined</th>
                            <th>@Resources.Avg</th>
                            <th>@Resources.Max</th>
                        </tr>
                    </thead>
                    <tfoot></tfoot>
                    <tbody>
                        @foreach (var t in Model.OnLeaderboard)
                        {
                            <tr id="tank-id-@t.TankId.ToString()-@t.PlayerId.ToString()">
                                <td class="text-center" data-sort="@t.Nation" data-filter="@t.Nation">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Nation.ToString())" alt="@Resources.ResourceManager.GetString(t.Nation.ToString())" src="~/Images/Nations/@((int) t.Nation).png" />
                                </td>
                                <td class="text-center" data-sort="@t.Type" data-filter="@t.Type@(t.IsPremium ? " Premium" : " Regular")">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Type.ToString())" alt="@Resources.ResourceManager.GetString(t.Type.ToString())" src="~/Images/Types/@((int) t.Type).svg" />
                                </td>
                                <td class="text-center" data-sort="@t.Tier" data-filter="@t.Tier">@t.Tier.ToRomanNumeral()</td>
                                <td style="white-space: nowrap;" data-sort="@t.Name.RemoveDiacritics().ToLowerInvariant()" data-filter="@t.Name.RemoveDiacritics().ToLowerInvariant() @t.FullName.RemoveDiacritics().ToLowerInvariant()">
                                    @Helpers.TankLink(t)
                                </td>
                                <td class="number-integer">@t.Order.ToString("N0")</td>
                                <td class="number-integer">@t.Battles.ToString("N0")</td>
                                <td class="number-integer">@t.DirectDamage.ToString("N0")</td>
                                <td class="number-integer">@t.DamageAssisted.ToString("N0")</td>
                                <td class="number-integer">@t.TotalDamage.ToString("N0")</td>
                                <td class="number">@t.Kills.ToString("N2")</td>
                                <td class="number-integer">@t.MaxKills.ToString("N0")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            @if (Model.LeaderIfPlayABattle.Length > 0)
            {
                <h3>@Resources.LeaderIfPlayABattle</h3>
                @Html.Raw(string.Format(Resources.LeaderIfPlayABattleExplanation, Model.NextLeaderboardCutMoment))
                <table class="data table-striped" id="leaderIfPlayABattle">
                    <thead>
                        <tr>
                            <th colspan="4">@Resources.Tank</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th rowspan="2">@Resources.DaysAgo</th>
                            <th rowspan="2">
                                <img alt="@Resources.Battles" title="@Resources.Battles" height="18" src="~/Images/battles-fought.png" />
                            </th>
                            <th colspan="3" class="sort-key">@Resources.Damage</th>
                            @*extend*@
                            @*extend*@
                            <th colspan="2">@Resources.Kills</th>
                            @*extend*@
                        </tr>
                        <tr>
                            <th><img alt="@Resources.Nation" title="@Resources.Nation" height="18" src="~/Images/Nations/Globe_icon.svg" /></th>
                            <th><img alt="@Resources.Type" title="@Resources.Type" height="18" src="~/Images/Types/types.png" /></th>
                            <th><span style="white-space: nowrap;" title="@Resources.Tier">V-X</span></th>
                            <th>@Resources.Name</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th>@Resources.Direct</th>
                            <th>@Resources.Assisted</th>
                            <th class="sort-key">@Resources.Combined</th>
                            <th>@Resources.Avg</th>
                            <th>@Resources.Max</th>
                        </tr>
                    </thead>
                    <tfoot></tfoot>
                    <tbody>
                        @foreach (var t in Model.LeaderIfPlayABattle)
                        {
                            <tr id="tank-id-lipa-@t.TankId.ToString()-@Model.Player.Id.ToString()">
                                <td class="text-center" data-sort="@t.Nation" data-filter="@t.Nation">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Nation.ToString())" alt="@Resources.ResourceManager.GetString(t.Nation.ToString())" src="~/Images/Nations/@((int) t.Nation).png" />
                                </td>
                                <td class="text-center" data-sort="@t.Type" data-filter="@t.Type@(t.IsPremium ? " Premium" : " Regular")">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Type.ToString())" alt="@Resources.ResourceManager.GetString(t.Type.ToString())" src="~/Images/Types/@((int) t.Type).svg" />
                                </td>
                                <td class="text-center" data-sort="@t.Tier" data-filter="@t.Tier">@t.Tier.ToRomanNumeral()</td>
                                <td style="white-space: nowrap;" data-sort="@t.Name.RemoveDiacritics().ToLowerInvariant()" data-filter="@t.Name.RemoveDiacritics().ToLowerInvariant() @t.FullName.RemoveDiacritics().ToLowerInvariant()">
                                    @Helpers.TankLink(t)
                                </td>
                                <td class="number-integer">@t.LastBattleAge.TotalDays.ToString("N0")</td>
                                <td class="number-integer">@t.Battles.ToString("N0")</td>
                                <td class="number-integer">@t.DirectDamagePerBattle.ToString("N0")</td>
                                <td class="number-integer">@t.DamageAssistedPerBattle.ToString("N0")</td>
                                <td class="number-integer">@t.TotalDamagePerBattle.ToString("N0")</td>
                                <td class="number">@t.KillsPerBattle.ToString("N2")</td>
                                <td class="number-integer">@t.MaxFrags.ToString("N0")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            @if (Model.LeaderIfFewMoreGames.Any())
            {
                <h3>@Resources.LeaderIfFewMoreGames</h3>
                @Html.Raw(string.Format(Resources.LeaderIfFewMoreGamesExplanation, Model.NextLeaderboardCutMoment))
                <table class="data table-striped" id="leaderIfFewMoreGames">
                    <thead>
                        <tr>
                            <th colspan="4">@Resources.Tank</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th rowspan="2">@Resources.DaysAgo</th>
                            <th rowspan="2">
                                <img alt="@Resources.Battles" title="@Resources.Battles" height="18" src="~/Images/battles-fought.png" />
                            </th>
                            <th colspan="3" class="sort-key">@Resources.Damage</th>
                            @*extend*@
                            @*extend*@
                            <th colspan="2">@Resources.Kills</th>
                            @*extend*@
                        </tr>
                        <tr>
                            <th><img alt="@Resources.Nation" title="@Resources.Nation" height="18" src="~/Images/Nations/Globe_icon.svg" /></th>
                            <th><img alt="@Resources.Type" title="@Resources.Type" height="18" src="~/Images/Types/types.png" /></th>
                            <th><span style="white-space: nowrap;" title="@Resources.Tier">V-X</span></th>
                            <th>@Resources.Name</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th>@Resources.Direct</th>
                            <th>@Resources.Assisted</th>
                            <th class="sort-key">@Resources.Combined</th>
                            <th>@Resources.Avg</th>
                            <th>@Resources.Max</th>
                        </tr>
                    </thead>
                    <tfoot></tfoot>
                    <tbody>
                        @foreach (var t in Model.LeaderIfFewMoreGames)
                        {
                            <tr id="tank-id-lipa-@t.TankId.ToString()-@Model.Player.Id.ToString()">
                                <td class="text-center" data-sort="@t.Nation" data-filter="@t.Nation">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Nation.ToString())" alt="@Resources.ResourceManager.GetString(t.Nation.ToString())" src="~/Images/Nations/@((int) t.Nation).png" />
                                </td>
                                <td class="text-center" data-sort="@t.Type" data-filter="@t.Type@(t.IsPremium ? " Premium" : " Regular")">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Type.ToString())" alt="@Resources.ResourceManager.GetString(t.Type.ToString())" src="~/Images/Types/@((int) t.Type).svg" />
                                </td>
                                <td class="text-center" data-sort="@t.Tier" data-filter="@t.Tier">@t.Tier.ToRomanNumeral()</td>
                                <td style="white-space: nowrap;" data-sort="@t.Name.RemoveDiacritics().ToLowerInvariant()" data-filter="@t.Name.RemoveDiacritics().ToLowerInvariant() @t.FullName.RemoveDiacritics().ToLowerInvariant()">
                                    @Helpers.TankLink(t)
                                </td>
                                <td class="number-integer">@t.LastBattleAge.TotalDays.ToString("N0")</td>
                                <td class="number-integer">@t.Battles.ToString("N0")</td>
                                <td class="number-integer">@t.DirectDamagePerBattle.ToString("N0")</td>
                                <td class="number-integer">@t.DamageAssistedPerBattle.ToString("N0")</td>
                                <td class="number-integer">@t.TotalDamagePerBattle.ToString("N0")</td>
                                <td class="number">@t.KillsPerBattle.ToString("N2")</td>
                                <td class="number-integer">@t.MaxFrags.ToString("N0")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            @if (Model.LeaderIfFewMoreDamage.Any())
            {
                <h3>@Resources.LeaderIfFewMoreDamage</h3>
                @Html.Raw(string.Format(Resources.LeaderIfFewMoreDamageExplanation, Model.NextLeaderboardCutMoment))
                <table class="data table-striped" id="leaderIfFewMoreDamage">
                    <thead>
                        <tr>
                            <th colspan="4">@Resources.Tank</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th rowspan="2">Days Ago</th>
                            <th rowspan="2">
                                <img alt="@Resources.Battles" title="@Resources.Battles" height="18" src="~/Images/battles-fought.png" />
                            </th>
                            <th colspan="3" class="sort-key">@Resources.Damage</th>
                            @*extend*@
                            @*extend*@
                            <th colspan="2">@Resources.Kills</th>
                            @*extend*@
                        </tr>
                        <tr>
                            <th><img alt="@Resources.Nation" title="@Resources.Nation" height="18" src="~/Images/Nations/Globe_icon.svg" /></th>
                            <th><img alt="@Resources.Type" title="@Resources.Type" height="18" src="~/Images/Types/types.png" /></th>
                            <th><span style="white-space: nowrap;" title="@Resources.Tier">V-X</span></th>
                            <th>@Resources.Name</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th>@Resources.Direct</th>
                            <th>@Resources.Assisted</th>
                            <th class="sort-key">@Resources.Combined</th>
                            <th>@Resources.Avg</th>
                            <th>@Resources.Max</th>
                        </tr>
                    </thead>
                    <tfoot></tfoot>
                    <tbody>
                        @foreach (var t in Model.LeaderIfFewMoreDamage)
                        {
                            <tr id="tank-id-lipa-@t.TankId.ToString()-@Model.Player.Id.ToString()">
                                <td class="text-center" data-sort="@t.Nation" data-filter="@t.Nation">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Nation.ToString())" alt="@Resources.ResourceManager.GetString(t.Nation.ToString())" src="~/Images/Nations/@((int) t.Nation).png" />
                                </td>
                                <td class="text-center" data-sort="@t.Type" data-filter="@t.Type@(t.IsPremium ? " Premium" : " Regular")">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Type.ToString())" alt="@Resources.ResourceManager.GetString(t.Type.ToString())" src="~/Images/Types/@((int) t.Type).svg" />
                                </td>
                                <td class="text-center" data-sort="@t.Tier" data-filter="@t.Tier">@t.Tier.ToRomanNumeral()</td>
                                <td style="white-space: nowrap;" data-sort="@t.Name.RemoveDiacritics().ToLowerInvariant()" data-filter="@t.Name.RemoveDiacritics().ToLowerInvariant() @t.FullName.RemoveDiacritics().ToLowerInvariant()">
                                    @Helpers.TankLink(t)
                                </td>
                                <td class="number-integer">@t.LastBattleAge.TotalDays.ToString("N0")</td>
                                <td class="number-integer">@t.Battles.ToString("N0")</td>
                                <td class="number-integer">@t.DirectDamagePerBattle.ToString("N0")</td>
                                <td class="number-integer">@t.DamageAssistedPerBattle.ToString("N0")</td>
                                <td class="number-integer">@t.TotalDamagePerBattle.ToString("N0")</td>
                                <td class="number">@t.KillsPerBattle.ToString("N2")</td>
                                <td class="number-integer">@t.MaxFrags.ToString("N0")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            @if (Model.LeaderOnNextUpdate.Any())
            {
                <h3>@Resources.LeaderOnNextUpdate</h3>
                @Html.Raw(string.Format(Resources.LeaderOnNextUpdateExplanation, Model.NextLeaderboardPublishMoment))
                <table class="data table-striped" id="leaderOnNextUpdate">
                    <thead>
                        <tr>
                            <th colspan="4">@Resources.Tank</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th rowspan="2">Days Ago</th>
                            <th rowspan="2">
                                <img alt="@Resources.Battles" title="@Resources.Battles" height="18" src="~/Images/battles-fought.png" />
                            </th>
                            <th colspan="3" class="sort-key">@Resources.Damage</th>
                            @*extend*@
                            @*extend*@
                            <th colspan="2">@Resources.Kills</th>
                            @*extend*@
                        </tr>
                        <tr>
                            <th><img alt="@Resources.Nation" title="@Resources.Nation" height="18" src="~/Images/Nations/Globe_icon.svg" /></th>
                            <th><img alt="@Resources.Type" title="@Resources.Type" height="18" src="~/Images/Types/types.png" /></th>
                            <th><span style="white-space: nowrap;" title="@Resources.Tier">V-X</span></th>
                            <th>@Resources.Name</th>
                            @*extend*@
                            @*extend*@
                            @*extend*@
                            <th>@Resources.Direct</th>
                            <th>@Resources.Assisted</th>
                            <th class="sort-key">@Resources.Combined</th>
                            <th>@Resources.Avg</th>
                            <th>@Resources.Max</th>
                        </tr>
                    </thead>
                    <tfoot></tfoot>
                    <tbody>
                        @foreach (var t in Model.LeaderOnNextUpdate)
                        {
                            <tr id="tank-id-lipa-@t.TankId.ToString()-@Model.Player.Id.ToString()">
                                <td class="text-center" data-sort="@t.Nation" data-filter="@t.Nation">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Nation.ToString())" alt="@Resources.ResourceManager.GetString(t.Nation.ToString())" src="~/Images/Nations/@((int) t.Nation).png" />
                                </td>
                                <td class="text-center" data-sort="@t.Type" data-filter="@t.Type@(t.IsPremium ? " Premium" : " Regular")">
                                    <img height="18" title="@Resources.ResourceManager.GetString(t.Type.ToString())" alt="@Resources.ResourceManager.GetString(t.Type.ToString())" src="~/Images/Types/@((int) t.Type).svg" />
                                </td>
                                <td class="text-center" data-sort="@t.Tier" data-filter="@t.Tier">@t.Tier.ToRomanNumeral()</td>
                                <td style="white-space: nowrap;" data-sort="@t.Name.RemoveDiacritics().ToLowerInvariant()" data-filter="@t.Name.RemoveDiacritics().ToLowerInvariant() @t.FullName.RemoveDiacritics().ToLowerInvariant()">
                                    @Helpers.TankLink(t)
                                </td>
                                <td class="number-integer">@t.LastBattleAge.TotalDays.ToString("N0")</td>
                                <td class="number-integer">@t.Battles.ToString("N0")</td>
                                <td class="number-integer">@t.DirectDamagePerBattle.ToString("N0")</td>
                                <td class="number-integer">@t.DamageAssistedPerBattle.ToString("N0")</td>
                                <td class="number-integer">@t.TotalDamagePerBattle.ToString("N0")</td>
                                <td class="number">@t.KillsPerBattle.ToString("N2")</td>
                                <td class="number-integer">@t.MaxFrags.ToString("N0")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        </div>
        <div class="col-md-1"></div>
    </section>
}



@section scripts {
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript" src="~/Scripts/Site/PlayersOverall.js"></script>    
}